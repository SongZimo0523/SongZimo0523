<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zimo Song's Homepage</title>
    <style>
        /* 页面背景色和字体设置 */
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f8ff; /* 蓝色背景 */
            margin: 0;
            padding: 0;
        }

        /* 顶部标题 */
        h1 {
            text-align: center;
            color: #333;
        }

        /* 个人信息区域样式 */
        .container {
            display: flex;
            justify-content: flex-start;
            align-items: center;
            padding: 20px;
            margin-top: 50px;
            margin-left: 50px; /* 整体右移部分 */
        }

        /* 个人照片 */
        .photo {
            width: 180px; /* 照片放大1.2倍 */
            height: auto; /* 保持原始比例 */
            margin-right: 100px; /* 向右移动一些 */
            transform: translateY(-100px); /* 向上移动一些，值可以根据需要调整 */
        }

        /* 个人信息框 */
        .info {
            max-width: 800px;
            line-height: 1.6;
            color: #333;
        }

        /* 个人信息列表 */
        .education ul {
            padding-left: 0;
        }

        .education li {
            margin-bottom: 10px;
        }

        /* 使用 Flexbox 使得"地点和时间"与学校信息在一行 */
        .education .info-row {
            display: flex;
            justify-content: space-between; /* 让内容分别对齐 */
            align-items: center;
        }

        .education .info-row li {
            margin: 0;
        }

        /* 缩进处理 */
        .education .indent {
            margin-left: 20px; /* 给子项添加缩进 */
        }

        /* 兴趣区域 */
        .interests {
            position: absolute; /* 将兴趣区域定位到右侧 */
            top: 46%;
            right: 100px;
            transform: translateY(-50%); /* 使其垂直居中 */
            display: flex;
            flex-direction: column; /* 纵向排列图片 */
            align-items: center;
        }

        .interests img {
            width: 220px;
            height: auto;
            margin-bottom: 20px; /* 图片之间的间距 */
        }

        /* 可伸缩的博客模块 */
        .blog-section {
            margin-top: 40px;
            background-color: #fff;
            border: 1px solid #ddd;
            padding: 20px;
            margin: 0 20px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .blog-header {
            font-size: 1.5em;
            color: #333;
            cursor: pointer;
        }

        .blog-content {
            display: none;
            margin-top: 10px;
            color: #555;
        }

        .blog-header:hover {
            color: #007bff;
        }

        /* 页脚样式 */
        footer {
            background-color: #333;
            color: #ccc;
            text-align: center;
            padding: 10px 0;
            margin-top: 50px;
        }
    </style>
</head>

<body>

    <h1>Zimo Song's Homepage</h1>

    <!-- 个人信息展示区域 -->
    <div class="container">
        <img src="person.jpg" alt="Zimo Song" class="photo"> <!-- 替换为你的个人照片路径 -->
        <div class="info">
            <h2>Zimo Song</h2>
            <p>Hello! I am Zimo Song. Welcome to my personal website.</p>

            <div class="education">
                <h3>EDUCATION:</h3>
                <ul>
                    <li><strong>Southern University of Science and Technology&nbsp;&nbsp;&nbsp;&nbsp;Shenzhen, China&nbsp;&nbsp;09/2022 - 07/2026</strong></li>
                    <li class="indent">Department of Statistics and Data Science</li>
                    <li class="indent">Bachelor of Data Science and Big Data Technology</li>
                </ul>
            </div>

            <h3>RESEARCH INTERESTS:</h3>
            <ul>
                <li>Machine Learning and Artificial Intelligence</li>
                <li>Data Statistics and Analysis</li>
            </ul>

            <h3>PERSONAL INTERESTS:</h3>
            <ul>
                <li>Violin, Go, Photography</li>
            </ul>
        </div>
    </div>

    <!-- 兴趣图片显示区域 -->
    <div class="interests">
        <img src="photography1.jpg" alt="Photography"> <!-- 替换为你关于摄影的图片路径 -->
        <img src="violin1.jpg" alt="Violin 1"> <!-- 替换为你的小提琴图片路径 -->
        <img src="go1.png" alt="Go"> <!-- 替换为你关于围棋的图片路径 -->
    </div>

    <!-- 博客模块 -->
    <div class="blog-section">
        <div class="blog-header" onclick="toggleBlogContent()">Survival Analysis Blog</div>
        <div class="blog-content">
            <h3>基于虚拟电信公司数据的生存分析报告</h3>

            <h4>1. 总述</h4>
            <p>生存分析是一种统计方法，主要用于分析时间到特定事件发生的数据，核心目的是估算和比较不同组的生存概率</p>
            <p>本次生存分析针对虚拟电信公司数据，目的是预测客户在一定时间内的生存（未流失）概率，特别考虑了在某些条件下客户是否会加速流失的问题，并以此评估客户生涯价值</p>

            <h4>2. 数据导入</h4>
            <p>建立数据库 `survival_analysis`，并在其中建立原始数据表 `bronze_customers`，和经过处理的数据表 `silver_monthly_customers` 向数据库的 table 导入数据，以便开展之后的生存分析：</p>
            <img src="2.1.png" style="width: 50%; max-width: 600px; margin-bottom: 20px; display: block; margin-left: auto; margin-right: auto;"> 
            <p>其中，`Tenure` 与 `Churn` 两列数据对于生存分析非常重要</p>
            <ul>
                <li><strong>Tenure</strong>（服务期限）：客户与公司保持订阅关系的时间</li>
                <li><strong>Churn</strong>（客户流失）：一个布尔值，表示客户是否仍然是订阅用户</li>
            </ul>

            <h4>3. Kaplan-Meier 模型</h4>
            <p>用 Kaplan-Meier 构建生存概率曲线，曲线整体较为平滑，在 timeline 的初期和默契，生存概率下降速率较大</p>
            <p>由 Kaplan-Meier 模型计算得生存时间中位数为 34，即总体客户的取消订阅的时间中位数为 34 个月</p>
            <img src="3.1.png" style="width: 20%; max-width: 600px; margin-bottom: 20px; display: block; margin-left: auto; margin-right: auto;"> 
            <p>接下来评估协变量水平的生存概率，Kaplan-Meier模型适用于单变量分析，这里考虑在单变量取不同值时，各组的生存曲线是否有显著的不同，理想情况（零假设）为各组之间有显著的差异</p>
            <p>绘制按各协变量分组的 Kaplan-Meier 曲线，并进行 Log-rank 检验，图中曲线有明显区别或Log-rank 检验p值小于0.05，表示该协变量取值显著影响生存概率曲线</p>
            <p>gender：两组曲线十分接近，用Log-rank进一步检测，零假设为两组曲线无显著性差异，gender对应的p值为0.2045，大于0.05，当显著性水平为0.05时，我们可以认为这两个分组在统计学上是等效的</p>
            <img src="3.2.png" style="width: 20%; max-width: 600px; margin-bottom: 20px; display: block; margin-left: auto; margin-right: auto;"> 
            <p>onlineSecurity：各曲线间有明显差异，可以认为这种该协变量取值差异会显著影响生存概率曲线</p>
            <img src="3.3.png" style="width: 20%; max-width: 600px; margin-bottom: 20px; display: block; margin-left: auto; margin-right: auto;"> 
            <p>seniorCitizen：两组曲线十分接近，但Log-rank 检验显示有明显差异，可以认为这种该协变量取值差异会显著影响生存概率曲线</p>
            <img src="3.4.png" style="width: 20%; max-width: 600px; margin-bottom: 20px; display: block; margin-left: auto; margin-right: auto;"> 
            <p>partner：各曲线间有明显差异，可以认为这种该协变量取值差异会显著影响生存概率曲线</p>
            <img src="3.5.png" style="width: 20%; max-width: 600px; margin-bottom: 20px; display: block; margin-left: auto; margin-right: auto;"> 
            <p>dependents：各曲线间有明显差异，可以认为这种该协变量取值差异会显著影响生存概率曲线</p>
            <img src="3.6.png" style="width: 20%; max-width: 600px; margin-bottom: 20px; display: block; margin-left: auto; margin-right: auto;"> 
            <p>phoneService：两组曲线十分接近，用Log-rank进一步检测，phoneService对应的p值为0.3776，可以认为这两个分组在统计学上是等效的</p>
            <img src="3.7.png" style="width: 20%; max-width: 600px; margin-bottom: 20px; display: block; margin-left: auto; margin-right: auto;"> 
            <p>multipleLines：据图表显示，可以认为这种该协变量取值差异会显著影响生存概率曲线</p>
            <img src="3.8.png" style="width: 20%; max-width: 600px; margin-bottom: 20px; display: block; margin-left: auto; margin-right: auto;"> 
            <p>internetService：据图表显示，可以认为这种该协变量取值差异会显著影响生存概率曲线</p>
            <img src="3.9.png" style="width: 20%; max-width: 600px; margin-bottom: 20px; display: block; margin-left: auto; margin-right: auto;"> 
            <p>streamingTV：据图表显示，可以认为这种该协变量取值差异会显著影响生存概率曲线</p>
            <img src="3.10.png" style="width: 20%; max-width: 600px; margin-bottom: 20px; display: block; margin-left: auto; margin-right: auto;"> 
            <p>streamingMovies：据图表显示，可以认为这种该协变量取值差异会显著影响生存概率曲线</p>
            <img src="3.11.png" style="width: 20%; max-width: 600px; margin-bottom: 20px; display: block; margin-left: auto; margin-right: auto;"> 
            <p>onlineBackup：据图表显示，可以认为这种该协变量取值差异会显著影响生存概率曲线</p>
            <img src="3.13.png" style="width: 20%; max-width: 600px; margin-bottom: 20px; display: block; margin-left: auto; margin-right: auto;"> 
            <p>deviceProtection：据图表显示，可以认为这种该协变量取值差异会显著影响生存概率曲线</p>
            <img src="3.14.png" style="width: 20%; max-width: 600px; margin-bottom: 20px; display: block; margin-left: auto; margin-right: auto;"> 
            <p>techSupport：据图表显示，可以认为这种该协变量取值差异会显著影响生存概率曲线</p>
            <img src="3.15.png" style="width: 20%; max-width: 600px; margin-bottom: 20px; display: block; margin-left: auto; margin-right: auto;"> 
            <p>paperlessBilling：据图表显示，可以认为这种该协变量取值差异会显著影响生存概率曲线</p>
            <img src="3.16.png" style="width: 20%; max-width: 600px; margin-bottom: 20px; display: block; margin-left: auto; margin-right: auto;"> 
            <p>paymentMethod： “Bank transfer (automatic)” 和 “Credit card (automatic)”  的取值分组间没有显著的差异，而其他取值分组间的差异均会显著影响生存概率曲线</p>
            <img src="3.17.png" style="width: 20%; max-width: 600px; margin-bottom: 20px; display: block; margin-left: auto; margin-right: auto;"> 
            <p>上述操作评估了协变量水平的Kaplan-Meier生存曲线，结果显示：`gender`、`phoneService`，以及`paymentMethod`的 “Bank transfer (automatic)” 和 “Credit card (automatic)” 的分组间没有显著的差异，这几项的取值可能不会显著影响用户的生存曲线，而其他列数据均对生存曲线有显著性影响 </p>
            <p>除此之外，还可以进一步提取指定协变量取值的生存概率，用于后续分析，输出结果如图所示：</p>
            <img src="3.18.png" style="width: 5%; max-width: 600px; margin-bottom: 20px; display: block; margin-left: auto; margin-right: auto;"> 
            <p>Kaplan-Meier适用于单变量分析，对于影响客户生存曲线的多变量分析任务，由下一节Cox Proportional Hazards 模型完成</p>

            <h4>4. Cox Proportional Hazards 模型</h4>
            <p>Cox Proportional Hazards 模型，即cox风险比例模型，是生存分析中的一种半参数模型，通过协变量来估计风险比。模型假设每个个体的生存风险（即事件发生的速率）是由其协变量决定的，而这些协变量影响生存风险的方式是比例性的</p>
            <p>如下方公式所示，风险比 = 基线风险 * 部分风险，其中部分风险为变量值与基线变量不同时发生的危险变化</p>
            <img src="4.1.png" style="width: 20%; max-width: 600px; margin-bottom: 20px; display: block; margin-left: auto; margin-right: auto;"> 
            <p>该模型假设实验组与baseline组的风险比例随时间成正比</p>
            <p>对相关列进行one-hot编码后，使用生存时间（tenure）和事件标志（churn）拟合 Cox Proportional Hazards 模型：</p>
            <img src="4.2.png" style="width: 20%; max-width: 600px; margin-bottom: 20px; display: block; margin-left: auto; margin-right: auto;"> 
            <p>评估Cox比例风险模型需要关注：</p>
            <ul>
                <li>1.各协变量的统计显著性</li>
                <li>2.模型参数的置信区间</li>
                <li>3.各协变量对于风险比例的影响</li>
            </ul>
            <p>从summary中可以看到这里的四个协变量在alpha=0.05时都是显著的，summary中也显示了模型参数的置信区间</p>
            <p>各协变量对于风险比例的影响由下图给出，可以看出四个协变量独热编码对应值为1时，都会减少停止订阅的风险，减少的幅度从高到低为：`onlineBackup_Yes`, `techSupport_Yes`, `dependents_Yes`, `internetService_DSL`</p>
            <img src="4.3.png" style="width: 20%; max-width: 600px; margin-bottom: 20px; display: block; margin-left: auto; margin-right: auto;"> 
            <p>需要进一步检查 Cox 风险比例模型的比例风险假设是否成立</p>
            <p>1.Statistical Test检查是否满足假设，只有`dependents_Yes`满足了Cox模型的比例风险假设</p>
            <img src="4.4.png" style="width: 20%; max-width: 600px; margin-bottom: 20px; display: block; margin-left: auto; margin-right: auto;"> 
            <p>2.Schoenfeld Residuals输出图像检查是否满足假设</p>
            <p>理想情况下Schoenfeld Residuals不应随时间有明显变动，即残差线应尽量与水平平行并平坦。从图中可知`dependents_Yes`满足该假设，`internetService_DSL`对应的残差随时间而变动。`onlineBackup_Yes`对应的残差随时间变动最明显，`techSupport_Yes`对应的残差在时间线尽头附近被影响得最明显</p>
            <img src="4.5.png" style="width: 20%; max-width: 600px; margin-bottom: 20px; display: block; margin-left: auto; margin-right: auto;"> 
            <img src="4.6.png" style="width: 20%; max-width: 600px; margin-bottom: 20px; display: block; margin-left: auto; margin-right: auto;"> 
            <p>3.Log-log Kaplan-Meier Plots检查是否满足假设</p>
            <p>Log-Log Kaplan-Meier 曲线结果显示`internetService`不同组曲线间平行效果最差。`onlineBackup`, `techSupport`, `dependents`三项在log(timeline)为1-3之间时，各组曲线较为平行，但小于1或大于3时平行效果较差</p>
            <img src="4.7.png" style="width: 20%; max-width: 600px; margin-bottom: 20px; display: block; margin-left: auto; margin-right: auto;"> 
            <p>检验结果为Cox风险比例模型用于该数据并不满足假设，有以下解决方案：</p>
            <ul>
                <li>1.保持模型不变，建模目标为预测，关注损失度量来选择最终模型</li>
                <li>2.对现有模型进行分层处理，对于少数违反风险比例假设的变量进行分层，为每个分层变量创建不同的基线风险</li>
                <li>3.引入时间依赖变量，通过引入交互项来建模时间依赖变量，即扩展 Cox 比例风险模型</li>
                <li>4.使用三次样条或分段常数风险</li>
                <li>5.使用其他方法</li>
            </ul>
            <p>除此之外，还可以进一步提取指定协变量取值的生存概率，用于后续分析，输出结果如图所示：</p>
            <p>除此之外，还可以进一步提取指定协变量取值的生存概率，用于后续分析，输出结果如图所示：</p>

            <h4>5. Accelerated Failure Time 模型</h4>
            <p>加速失效时间模型（Accelerated Failure Time Model）与Cox比例风险模型不同，AFT模型并不直接建模风险比，而是通过对生存时间加速或减速来建模。它假设不同的协变量会以一定的速率影响事件发生的时间，如果某个协变量的系数为正，则说明该协变量会加速事件的发生，在此数据中表现为客户流失</p>
            <p>对相关列进行one-hot编码后，使用 Log-Logistic AFT 模型进行拟合：</p>
            <img src="5.1.png" style="width: 20%; max-width: 600px; margin-bottom: 20px; display: block; margin-left: auto; margin-right: auto;"> 
            <p>评估AFT模型需要关注：</p>
            <ul>
                <li>1.各协变量的统计显著性（p值），上图显示各协变量p值都小于0.05，可认为各协变量在统计学上都显著</li>
                <li>2.模型参数的置信区间，上图亦有给出</li>
                <li>3.各协变量对于风险比例的影响，举例来说`deviceProtection_Yes`的coef=0.48，exp(coef)=1.62，则用户使用设备保护时，用户的流失速度会增加1.62倍</li>
            </ul>
            <img src="5.2.png" style="width: 20%; max-width: 600px; margin-bottom: 20px; display: block; margin-left: auto; margin-right: auto;"> 
            <p>根据上面显示的AFT 模型的参数图，可以看出`onlineSecurity_Yes`，`internetService_DSL`对流失速度的增加影响最小</p>
            <p>评判AFT模型是否满足假设：</p>
            <ul>
                <li>1.是否符合比例赔率假设，线条平行时满足假设</li>
                <li>2.使用的特定分布是否适用，线条为直时满足假设</li>
            </ul>
            <p>绘制按不同协变量分组的 Log-log 变换后的 Kaplan-Meier 曲线，结论在最后给出</p>
            <img src="5.3.png" style="width: 20%; max-width: 600px; margin-bottom: 20px; display: block; margin-left: auto; margin-right: auto;"> 
            <img src="5.4.png" style="width: 20%; max-width: 600px; margin-bottom: 20px; display: block; margin-left: auto; margin-right: auto;"> 
            <p>可以看到，绝大多数图中的线是直的但不互相平行，证明所选的分布是正确的，但是AFT模型不适用于此数据的生存分析</p>

            <h4>6. 计算客户生涯价值</h4>
            <p>对于电信公司来说，最重要的是确定为各类型的客户的投入量。所以，我们进一步用生存模型的输出计算客户的生涯价值</p>
            <p>创建所选变量的小组件，其中internal rate为后续计算净现值的参数，其他变量为0或1的分类变量，用于确定目标用户的类型</p>
            <img src="6.1.png" style="width: 20%; max-width: 600px; margin-bottom: 20px; display: block; margin-left: auto; margin-right: auto;"> 
            <p>通过用户生存概率等数据，可以进一步计算出选定计划的月度利润，平均每月期望收入，平均每月期望收入净现值，累计净现值</p>
            <p>平均每月期望收入 = 月度利润 * 生存概率</p>
            <p>平均每月期望收入净现值 = 平均每月期望收入 / (1 + internal rate of return ^ 合同月数) </p>
            <p>净现值（NPV）考虑了货币的时间价值，可通过调整折现率反映不同风险水平。最终我们通过累计净现值来评估客户的生涯价值，即公司保证不会赔本的情况下对该类客户的最大支出</p>
            <p>根据上图类型用户，计算出的各数据结果：</p>
            <img src="6.2.png" style="width: 20%; max-width: 600px; margin-bottom: 20px; display: block; margin-left: auto; margin-right: auto;"> 
            <p>结果表明：对于无家属及合作伙伴、使用DSL网络服务、无网络备份与科技支持的客户，在`internal rate of return` =0.1时，该类客户到第十个月仍保持订阅的概率为0.63，累计净现值为218.67，即若要实现盈利，电信公司前10个月在每个该类用户的投入不得超过218.67，累计净现值也显示了该类用户在一定订阅时间段的生涯价值</p>
            <p>也可对以上生存概率、累计净现值等数据进行可视化，辅助公司决策</p>
            <img src="6.3.png" style="width: 20%; max-width: 600px; margin-bottom: 20px; display: block; margin-left: auto; margin-right: auto;"> 
            <p>该类用户在36个月的累计净现值约为500，生存概率在70天时降低至接近为零，电信公司需考虑到该类客户在连续订阅50个月后极有可能取消订阅的风险，并做出应对措施</p>

            <h4>7. 总结</h4>
            <p>本次生存分析任务使用Kaplan-Meier、Cox Proportional Hazards、Accelerated Failure Time等模型对电信客户不订阅的生存概率进行了分析，并且运用生存分析结果计算客户的生涯价值，为电信公司决策提供了帮助</p>
            <p>生存分析结果显示：</p>
            <p>性别、手机服务、银行或信用卡的支付方式不会显著影响用户的生存曲线，而其他客户数据均对生存曲线有显著性影响 。使用网络备份 、科技支持、存在家属依赖、使用DSL网络服务都会减少停止订阅的风险（即增加生存概率），并且增加的幅度按排序从高到低</p>
            <p>以无家属及合作伙伴、使用DSL网络服务、无网络备份与科技支持的客户为例，该类用户在36个月的累计净现值约为500，生存概率在70天时降低至接近为零，电信公司需考虑到该类客户在连续订阅50个月后极有可能取消订阅的风险，并做出应对措施</p>

        </div>
    </div>

    <!-- 页脚 -->
    <footer>
        <p>Zimo Song's Homepage || Powered by GitHub Pages</p>
    </footer>

    <script>
        // JavaScript 用于博客内容的伸缩显示
        function toggleBlogContent() {
            var content = document.querySelector('.blog-content');
            if (content.style.display === "none") {
                content.style.display = "block";
            } else {
                content.style.display = "none";
            }
        }
    </script>

</body>

</html>
